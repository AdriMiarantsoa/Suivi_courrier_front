{"ast":null,"code":"import _regeneratorRuntime from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'connection_user',\n  data: function data() {\n    return {\n      nom_utilisateur: '',\n      mot_de_passe: '',\n      confirmMdp: '',\n      role: '',\n      departement: '',\n      isLogin: true,\n      departements: [],\n      roles: [],\n      erreurMessage: ''\n    };\n  },\n  mounted: function mounted() {\n    this.getDepartements();\n    this.getRoles();\n  },\n  methods: {\n    getDepartements: function getDepartements() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"http://localhost:8081/api/departements\");\n            case 3:\n              response = _context.sent;\n              _this.departements = response.data;\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    getRoles: function getRoles() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"http://localhost:8081/api/roles\");\n            case 3:\n              response = _context2.sent;\n              _this2.roles = response.data;\n              _context2.next = 10;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 7]]);\n      }))();\n    },\n    login: function login() {\n      var _this3 = this;\n      var formData = new FormData();\n      formData.append('nom_utilisateur', this.nom_utilisateur);\n      formData.append('mot_de_passe', this.mot_de_passe);\n      axios.post('http://localhost:8081/api/login', formData).then(function (response) {\n        var token = response.data.token;\n        localStorage.setItem('authToken', token);\n        var redirectUrl = response.data.redirect;\n        _this3.$router.push(redirectUrl);\n      }).catch(function (error) {\n        if (error.response) {\n          _this3.erreurMessage = error.response.data;\n        } else {\n          _this3.erreurMessage = 'Une erreur est survenue lors de la connexion.';\n        }\n      });\n    },\n    signUp: function signUp() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var receptionData;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(_this4.mot_de_passe === _this4.confirmMdp)) {\n                _context3.next = 14;\n                break;\n              }\n              receptionData = {\n                nom_utilisateur: _this4.nom_utilisateur,\n                mot_de_passe: _this4.confirmMdp,\n                departement: _this4.departement,\n                role: _this4.role\n              };\n              _context3.prev = 2;\n              _context3.next = 5;\n              return axios.post('http://localhost:8081/api/signup', receptionData);\n            case 5:\n              _this4.isLogin = true;\n              _this4.resetForm();\n              _context3.next = 12;\n              break;\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](2);\n              console.error(\"Erreur lors de l'inscription:\", _context3.t0);\n            case 12:\n              _context3.next = 15;\n              break;\n            case 14:\n              alert(\"Les mots de passe ne correspondent pas\");\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[2, 9]]);\n      }))();\n    },\n    resetForm: function resetForm() {\n      this.nom_utilisateur = '';\n      this.mot_de_passe = '';\n      this.confirmMdp = '';\n      this.role = '';\n      this.departement = '';\n    },\n    toggleMode: function toggleMode() {\n      this.isLogin = !this.isLogin;\n      this.erreurMessage = ''; // Clear error message on mode change\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","nom_utilisateur","mot_de_passe","confirmMdp","role","departement","isLogin","departements","roles","erreurMessage","mounted","getDepartements","getRoles","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","t0","console","error","stop","_this2","_callee2","_callee2$","_context2","login","_this3","formData","FormData","append","post","then","token","localStorage","setItem","redirectUrl","redirect","$router","push","catch","signUp","_this4","_callee3","receptionData","_callee3$","_context3","resetForm","alert","toggleMode"],"sources":["src/pages/LoginUser.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"form\">\n      <img alt=\"User profile icon\" src=\"@/assets/ok.avif\" width=\"80\" height=\"80\" class=\"profile-icon\"/>\n      <h2 class=\"form-title\">{{ isLogin ? 'Login' : 'Sign Up' }}</h2>\n\n      <div v-if=\"erreurMessage\" class=\"error\">{{ erreurMessage }}</div>\n\n      <form @submit.prevent=\"isLogin ? login() : signUp()\" class=\"login-form\">\n        <div class=\"input-field\">\n          <label for=\"nom\">Username</label>\n          <input type=\"text\" id=\"nom\" v-model=\"nom_utilisateur\" placeholder=\"Enter your username\" />\n        </div>\n        <div class=\"input-field\">\n          <label for=\"mdp\">Password</label>\n          <input type=\"password\" id=\"mdp\" v-model=\"mot_de_passe\" placeholder=\"Enter your password\" />\n        </div>\n        <div v-if=\"!isLogin\" class=\"input-field\">\n          <label for=\"confirm-mdp\">Confirm Password</label>\n          <input type=\"password\" id=\"confirm-mdp\" v-model=\"confirmMdp\" placeholder=\"Re-enter your password\" />\n        </div>\n\n        <div v-if=\"!isLogin\" class=\"input-field\">\n          <label for=\"role\">Role</label>\n          <select v-model=\"role\" id=\"role\" class=\"styled-select\">\n            <option value=\"\" disabled>Select your role</option>\n            <option v-for=\"role in roles\" :key=\"role.id\" :value=\"role\">\n              {{ role.nom_role }}\n            </option>\n          </select>\n        </div>\n\n        <div v-if=\"!isLogin && role.nom_role !== 'Secretaire'\" class=\"input-field\">\n          <label for=\"departement\">Department</label>\n          <select v-model=\"departement\" id=\"departement\" class=\"styled-select\">\n            <option value=\"\" disabled>Select your department</option>\n            <option v-for=\"departement in departements\" :key=\"departement.id\" :value=\"departement\">\n              {{ departement.nom_departement }}\n            </option>\n          </select>\n        </div>\n\n        <div class=\"remember-me\" v-if=\"isLogin\">\n          <a href=\"#\" class=\"forgot-password\">Forgot Password?</a>\n        </div>\n        <button type=\"submit\" class=\"login-btn\">{{ isLogin ? 'LOGIN' : 'SIGN UP' }}</button>\n      </form>\n      <p class=\"message\" @click=\"toggleMode\">\n        {{ isLogin ? \"Don't have an account? Sign Up\" : \"Already have an account? Login\" }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'connection_user',\n  data() {\n    return {\n      nom_utilisateur: '',\n      mot_de_passe: '',\n      confirmMdp: '',\n      role: '',\n      departement: '',\n      isLogin: true,\n      departements: [],\n      roles: [],\n      erreurMessage: '' \n    }\n  },\n  mounted() {\n    this.getDepartements();\n    this.getRoles();\n  },\n  methods: {\n    async getDepartements() {\n      try {\n        const response = await axios.get(\"http://localhost:8081/api/departements\");\n        this.departements = response.data;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async getRoles() {\n      try {\n        const response = await axios.get(\"http://localhost:8081/api/roles\");\n        this.roles = response.data;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    login() {\n      const formData = new FormData();\n      formData.append('nom_utilisateur', this.nom_utilisateur);\n      formData.append('mot_de_passe', this.mot_de_passe);\n\n      axios.post('http://localhost:8081/api/login', formData)\n        .then(response => {\n          const token = response.data.token;\n          localStorage.setItem('authToken', token);\n          const redirectUrl = response.data.redirect;\n          this.$router.push(redirectUrl);\n        })\n        .catch(error => {\n          if (error.response) {\n            this.erreurMessage = error.response.data; \n          } else {\n            this.erreurMessage = 'Une erreur est survenue lors de la connexion.'; \n          }\n        });\n    },\n    async signUp() {\n      if (this.mot_de_passe === this.confirmMdp) {\n        const receptionData = {\n          nom_utilisateur: this.nom_utilisateur,\n          mot_de_passe: this.confirmMdp,\n          departement: this.departement,\n          role: this.role\n        };\n\n        try {\n          await axios.post('http://localhost:8081/api/signup', receptionData);\n          this.isLogin = true;\n          this.resetForm();\n        } catch (error) {\n          console.error(\"Erreur lors de l'inscription:\", error);\n        }\n      } else {\n        alert(\"Les mots de passe ne correspondent pas\");\n      }\n    },\n    resetForm() {\n      this.nom_utilisateur = '';\n      this.mot_de_passe = '';\n      this.confirmMdp = '';\n      this.role = '';\n      this.departement = '';\n    },\n    toggleMode() {\n      this.isLogin = !this.isLogin;\n      this.erreurMessage = ''; // Clear error message on mode change\n    }\n  }\n}\n</script>\n\n<style scoped>\nbody, html {\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n    font-family: 'Arial', sans-serif;\n    background: linear-gradient(to bottom, #0a2e73, #00c9ff);\n}\n\n.login-page {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n}\n\n.form {\n    background: white;\n    border-radius: 15px;\n    padding: 40px;\n    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.15);\n    width: 400px;\n    max-width: 90%;\n    text-align: center;\n}\n\n.profile-icon {\n    margin-bottom: 20px;\n}\n\n.form-title {\n    font-size: 24px;\n    color: #00e6a3;\n    margin-bottom: 20px;\n}\n\n.input-field {\n    margin-bottom: 20px;\n    text-align: left;\n}\n\n.input-field label {\n    display: block;\n    margin-bottom: 5px;\n    font-weight: bold;\n}\n\n.input-field input,\n.styled-select {\n    width: 100%;\n    padding: 12px;\n    border: 2px solid #00e6a3;\n    border-radius: 25px;\n    outline: none;\n    font-size: 16px;\n    transition: border-color 0.3s;\n}\n\n.input-field input:focus,\n.styled-select:focus {\n    border-color: #00b37e;\n}\n\n.login-btn {\n    width: 100%;\n    padding: 12px;\n    border: none;\n    border-radius: 25px;\n    background: #00e6a3;\n    color: white;\n    font-size: 18px;\n    cursor: pointer;\n    transition: background 0.3s, transform 0.2s;\n}\n\n.login-btn:hover {\n    background: #00b37e;\n    transform: scale(1.05);\n}\n\n.message {\n    margin-top: 15px;\n    cursor: pointer;\n    color: #007bff;\n    text-decoration: underline;\n}\n\n.error {\n    color: red;\n    margin-bottom: 15px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}