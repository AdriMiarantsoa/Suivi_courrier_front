{"ast":null,"code":"import _regeneratorRuntime from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\nimport axios from 'axios';\n\n// Register Chart.js components\nChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\nexport default {\n  components: {\n    BarChart: Bar\n  },\n  data: function data() {\n    return {\n      statisticsData: [],\n      departementName: '',\n      departementId: '',\n      recu_par: null\n    };\n  },\n  computed: {\n    chartData: function chartData() {\n      if (this.statisticsData.length === 0) {\n        return null;\n      }\n      var labels = this.statisticsData.map(function (item) {\n        return \"Jour \".concat(item.dayOfWeek);\n      });\n      var data = this.statisticsData.map(function (item) {\n        return item.courrierCount;\n      });\n      return {\n        labels: labels,\n        datasets: [{\n          label: 'Statistiques des Courriers',\n          backgroundColor: '#42A5F5',\n          data: data\n        }]\n      };\n    },\n    chartOptions: function chartOptions() {\n      return {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: true\n          },\n          title: {\n            display: true,\n            text: 'Statistiques des Documents'\n          }\n        }\n      };\n    }\n  },\n  mounted: function mounted() {\n    this.getDepartement();\n  },\n  methods: {\n    getDepartement: function getDepartement() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var userresponse, recu_par, responsedept, deptresponse;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('http://localhost:8081/api/utilisateur', {\n                headers: {\n                  Authorization: \"Bearer \".concat(localStorage.getItem('authToken'))\n                }\n              });\n            case 3:\n              userresponse = _context.sent;\n              recu_par = userresponse.data;\n              if (recu_par) {\n                _context.next = 8;\n                break;\n              }\n              console.error(\"User   data is missing\");\n              return _context.abrupt(\"return\");\n            case 8:\n              _context.next = 10;\n              return axios.get(\"http://localhost:8081/api/departement/utilisateur/\".concat(recu_par.id_utilisateur));\n            case 10:\n              responsedept = _context.sent;\n              _this.departementId = responsedept.data;\n              _context.next = 14;\n              return axios.get(\"http://localhost:8081/api/departement/\".concat(_this.departementId));\n            case 14:\n              deptresponse = _context.sent;\n              _this.departementName = deptresponse.data;\n              _context.next = 18;\n              return _this.fetchStatistics();\n            case 18:\n              _context.next = 23;\n              break;\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 20]]);\n      }))();\n    },\n    fetchStatistics: function fetchStatistics() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"http://localhost:8081/api/statistique/courriers/\".concat(_this2.departementId));\n            case 3:\n              response = _context2.sent;\n              _this2.statisticsData = response.data;\n              _context2.next = 10;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"Error fetching statistics data:\", _context2.t0);\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 7]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["Bar","Chart","ChartJS","Title","Tooltip","Legend","BarElement","CategoryScale","LinearScale","axios","register","components","BarChart","data","statisticsData","departementName","departementId","recu_par","computed","chartData","length","labels","map","item","concat","dayOfWeek","courrierCount","datasets","label","backgroundColor","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","title","text","mounted","getDepartement","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userresponse","responsedept","deptresponse","wrap","_callee$","_context","prev","next","get","headers","Authorization","localStorage","getItem","sent","console","error","abrupt","id_utilisateur","fetchStatistics","t0","stop","_this2","_callee2","response","_callee2$","_context2"],"sources":["src/pages/StatistiqueCourrierDept.vue"],"sourcesContent":["<template>\n    <div>\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h3 style=\"color:#003366;\">{{ departementName }}</h3>\n            </div>  \n            <div class=\"card-body\">\n              <h5>Document Statistics Chart</h5>\n              <!-- Utilisez :data au lieu de :chart-data -->\n              <bar-chart v-if=\"chartData\" :data=\"chartData\" :options=\"chartOptions\"></bar-chart>\n              <p v-else>Loading chart data...</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { Bar } from 'vue-chartjs';\n  import { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\n  import axios from 'axios';\n  \n  // Register Chart.js components\n  ChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\n  \n  export default {\n    components: {\n      BarChart: Bar\n    },\n    data() {\n      return {\n        statisticsData: [],\n        departementName: '',\n        departementId: '',\n        recu_par: null\n      };\n    },\n    computed: {\n      chartData() {\n        if (this.statisticsData.length === 0) {\n          return null;\n        }\n        const labels = this.statisticsData.map(item => `Jour ${item.dayOfWeek}`);\n        const data = this.statisticsData.map(item => item.courrierCount);\n  \n        return {\n          labels: labels,\n          datasets: [\n            {\n              label: 'Statistiques des Courriers',\n              backgroundColor: '#42A5F5',\n              data: data\n            }\n          ]\n        };\n      },\n      chartOptions() {\n        return {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              display: true\n            },\n            title: {\n              display: true,\n              text: 'Statistiques des Documents'\n            }\n          }\n        };\n      }\n    },\n    mounted() {\n      this.getDepartement();\n    },\n    methods: {\n      async getDepartement() {\n        try {\n          const userresponse = await axios.get('http://localhost:8081/api/utilisateur', {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('authToken')}`,\n            },\n          });\n          const recu_par = userresponse.data; \n          if (!recu_par) {\n            console.error(\"User   data is missing\");\n            return;\n          }\n          const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${recu_par.id_utilisateur}`);\n          this.departementId = responsedept.data;\n    \n          const deptresponse = await axios.get(`http://localhost:8081/api/departement/${this.departementId}`);\n          this.departementName = deptresponse.data;\n    \n          await this.fetchStatistics(); \n    \n        } catch (error) {\n          console.error(error);\n        }\n      },\n      async fetchStatistics() {\n        try {\n          const response = await axios.get(`http://localhost:8081/api/statistique/courriers/${this.departementId}`);\n          this.statisticsData = response.data;\n        } catch (error) {\n          console.error(\"Error fetching statistics data:\", error);\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}