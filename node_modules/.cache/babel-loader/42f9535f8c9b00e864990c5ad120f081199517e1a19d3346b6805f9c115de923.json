{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      courriers: [],\n      departementId: '',\n      user: null\n    };\n  },\n  mounted() {\n    this.getCourriersAlert();\n  },\n  methods: {\n    async getCourriersAlert() {\n      try {\n        // Get user information\n        const userResponse = await axios.get('http://localhost:8081/api/utilisateur', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        this.user = userResponse.data;\n        if (!this.user) {\n          console.error(\"User data is missing\");\n          return;\n        }\n\n        // Get department ID\n        const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${this.user.id_utilisateur}`);\n        this.departementId = responsedept.data;\n\n        // Get alert couriers for the department\n        const response = await axios.get(`http://localhost:8081/api/departement/${this.departementId}/alerte`);\n        this.courriers = response.data;\n      } catch (error) {\n        console.error(\"Error retrieving alert couriers:\", error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","courriers","departementId","user","mounted","getCourriersAlert","methods","userResponse","get","headers","Authorization","localStorage","getItem","console","error","responsedept","id_utilisateur","response"],"sources":["src/pages/Notifications.vue"],"sourcesContent":["<template>\n  <card title=\"Notifications\" sub-title=\"Courriers non reçu plus de 72h\">\n    <div>\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n\n      <!-- Alert message -->\n      <div v-if=\"courriers.length > 0\" class=\"alert alert-danger alert-with-icon mt-3\" data-notify=\"container\">\n        <span data-notify=\"icon\" class=\"ti-bell\"></span>\n        <span>Certains courriers non pas encore été reçu dépassant le délai de 72h.</span>\n      </div>\n\n          <table class=\"table table-hover\">\n            <thead>\n              <tr>\n                <th>Date de Reception</th>\n                <th>ID</th>\n                <th>Nom</th>\n                <th>Expediteur</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"courrier in courriers\" :key=\"courrier.id_courrier\">\n                <td>{{ courrier.date_reception }}</td>\n                <td>\n                  <router-link :to=\"{ name: 'Liste de courriers en attente', params: { id: courrier.id_courrier } }\">\n                    {{ courrier.id_courrier }}\n                  </router-link>\n                </td>\n                <td>{{ courrier.nom_courrier }}</td>\n                <td>{{ courrier.expediteur }}</td>\n              </tr>\n              <tr v-if=\"courriers.length === 0\">\n                <td colspan=\"4\" class=\"text-center\">Pas de courriers dépassant de 72 hours.</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n    </div>\n  </card>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      courriers: [],\n      departementId: '',\n      user: null,\n    };\n  },\n  mounted() {\n    this.getCourriersAlert();\n  },\n  methods: {\n    async getCourriersAlert() {\n      try {\n        // Get user information\n        const userResponse = await axios.get('http://localhost:8081/api/utilisateur', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`,\n          },\n        });\n        this.user = userResponse.data;\n        if (!this.user) {\n          console.error(\"User data is missing\");\n          return;\n        }\n\n        // Get department ID\n        const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${this.user.id_utilisateur}`);\n        this.departementId = responsedept.data;\n\n        // Get alert couriers for the department\n        const response = await axios.get(`http://localhost:8081/api/departement/${this.departementId}/alerte`);\n        this.courriers = response.data;\n\n      } catch (error) {\n        console.error(\"Error retrieving alert couriers:\", error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.alert-with-icon {\n  display: flex;\n  align-items: center;\n}\n\n.alert-with-icon .ti-bell {\n  font-size: 1.5rem;\n  margin-right: 10px;\n}\n\n.table-hover tbody tr:hover {\n  background-color: #f5f5f5;\n}\n</style>\n"],"mappings":"AA6CA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,iBAAA;EACA;EACAC,OAAA;IACA,MAAAD,kBAAA;MACA;QACA;QACA,MAAAE,YAAA,SAAAR,KAAA,CAAAS,GAAA;UACAC,OAAA;YACAC,aAAA,YAAAC,YAAA,CAAAC,OAAA;UACA;QACA;QACA,KAAAT,IAAA,GAAAI,YAAA,CAAAP,IAAA;QACA,UAAAG,IAAA;UACAU,OAAA,CAAAC,KAAA;UACA;QACA;;QAEA;QACA,MAAAC,YAAA,SAAAhB,KAAA,CAAAS,GAAA,2DAAAL,IAAA,CAAAa,cAAA;QACA,KAAAd,aAAA,GAAAa,YAAA,CAAAf,IAAA;;QAEA;QACA,MAAAiB,QAAA,SAAAlB,KAAA,CAAAS,GAAA,+CAAAN,aAAA;QACA,KAAAD,SAAA,GAAAgB,QAAA,CAAAjB,IAAA;MAEA,SAAAc,KAAA;QACAD,OAAA,CAAAC,KAAA,qCAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}