{"ast":null,"code":"import _regeneratorRuntime from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      utilisateurlist: [],\n      currentPage: 1,\n      itemsPerPage: 5,\n      loading: false\n    };\n  },\n  mounted: function mounted() {\n    this.getListUserNotApprove();\n  },\n  computed: {\n    totalPages: function totalPages() {\n      return Math.ceil(this.utilisateurlist.length / this.itemsPerPage);\n    },\n    paginatedUsers: function paginatedUsers() {\n      var start = (this.currentPage - 1) * this.itemsPerPage;\n      var end = start + this.itemsPerPage;\n      return this.utilisateurlist.slice(start, end);\n    }\n  },\n  methods: {\n    getListUserNotApprove: function getListUserNotApprove() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"http://localhost:8081/api/utilisateurs_non_approuves\");\n            case 3:\n              response = _context.sent;\n              _this.utilisateurlist = response.data;\n              console.log(\"Données du view :\", _this.utilisateurlist);\n              _context.next = 10;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }))();\n    },\n    Approve: function Approve(utilisateur) {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.loading = true;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.put(\"http://localhost:8081/api/approve/\".concat(utilisateur.id_utilisateur));\n            case 4:\n              response = _context2.sent;\n              console.log(\"update :\", response.data);\n              _context2.next = 8;\n              return _this2.getListUserNotApprove();\n            case 8:\n              _context2.next = 14;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error(_context2.t0);\n              alert(\"Une erreur est survenue lors de l'approbation de l'utilisateur.\");\n            case 14:\n              _context2.prev = 14;\n              _this2.loading = false;\n              return _context2.finish(14);\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 10, 14, 17]]);\n      }))();\n    },\n    DeleteUser: function DeleteUser(utilisateur) {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.delete(\"http://localhost:8081/api/deleteUtilisateur/\".concat(utilisateur.id_utilisateur));\n            case 3:\n              response = _context3.sent;\n              console.log(\"delete :\", response.data);\n              _context3.next = 7;\n              return _this3.getListUserNotApprove();\n            case 7:\n              _context3.next = 12;\n              break;\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n            case 12:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 9]]);\n      }))();\n    },\n    changePage: function changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","utilisateurlist","currentPage","itemsPerPage","loading","mounted","getListUserNotApprove","computed","totalPages","Math","ceil","length","paginatedUsers","start","end","slice","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","console","log","t0","stop","Approve","utilisateur","_this2","_callee2","_callee2$","_context2","put","concat","id_utilisateur","error","alert","finish","DeleteUser","_this3","_callee3","_callee3$","_context3","delete","changePage","page"],"sources":["src/pages/ListUserNotApproved.vue"],"sourcesContent":["<template>\n  <div class=\"ged-container\">\n    <div class=\"card\">\n      <div class=\"card-header\">\n        <h3>Utilisateur en attente d'approbation</h3>\n      </div>\n      <div class=\"card-body\">\n        <div v-if=\"utilisateurlist.length === 0\" class=\"empty-state\">\n          <i class=\"ti-folder empty-icon\"></i>\n          <p>Pas d'utilisateur en attente pour le moment.</p>\n        </div>\n        <div v-else class=\"table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th>Nom</th>\n                <th>Departement</th>\n                <th>Role</th>\n                <th>Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"utilisateur in paginatedUsers\" :key=\"utilisateur.id_utilisateur\">\n                <td>{{ utilisateur.nom_utilisateur }}</td>\n                <td>{{ utilisateur.nom_departement }}</td>\n                <td>{{ utilisateur.nom_role }}</td>\n                <td>\n                  <button class=\"btn btn-approve btn-space\" @click=\"Approve(utilisateur)\"><i class=\"ti-check\"></i></button>\n                  <button class=\"btn btn-delete btn-space\" @click=\"DeleteUser(utilisateur)\"><i class=\"ti-trash\"></i></button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        <div class=\"pagination\" v-if=\"utilisateurlist && utilisateurlist.length > 0\">\n          <button @click=\"changePage(currentPage - 1)\" :disabled=\"currentPage === 1\">Précédent</button>\n          <span>Page {{ currentPage }} sur {{ totalPages }}</span>\n          <button @click=\"changePage(currentPage + 1)\" :disabled=\"currentPage === totalPages\">Suivant</button>\n        </div>\n\n      </div>\n    </div>\n</div>\n</template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        utilisateurlist: [],\n        currentPage: 1,\n        itemsPerPage: 5,\n        loading: false\n      };\n    },\n    mounted() {\n      this.getListUserNotApprove();\n    },\n    computed: {\n      totalPages() {\n        return Math.ceil(this.utilisateurlist.length / this.itemsPerPage);\n      },\n      paginatedUsers() {\n        const start = (this.currentPage - 1) * this.itemsPerPage;\n        const end = start + this.itemsPerPage;\n        return this.utilisateurlist.slice(start, end);\n      },\n    },\n    methods: {\n        async getListUserNotApprove() {\n            try {\n                const response = await axios.get(\"http://localhost:8081/api/utilisateurs_non_approuves\");\n                this.utilisateurlist = response.data;\n                console.log(\"Données du view :\",this.utilisateurlist);\n            } catch (error) {\n          //      console.error(error);\n            }\n        },\n        async Approve(utilisateur) {\n            this.loading = true;\n            try {\n                const response = await axios.put(`http://localhost:8081/api/approve/${utilisateur.id_utilisateur}`);\n                console.log(\"update :\", response.data);\n                await this.getListUserNotApprove();\n            } catch (error) {\n                console.error(error);\n                alert(\"Une erreur est survenue lors de l'approbation de l'utilisateur.\");\n            } finally {\n                this.loading = false;\n            }\n        },\n        async DeleteUser(utilisateur) {\n            try {\n                const response = await axios.delete(`http://localhost:8081/api/deleteUtilisateur/${utilisateur.id_utilisateur}`);\n                console.log(\"delete :\",response.data);\n                await this.getListUserNotApprove();\n            } catch (error) {\n                console.error(error);\n            }\n        },\n        changePage(page) {\n          if (page >= 1 && page <= this.totalPages) {\n            this.currentPage = page;\n          }\n        }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .ged-container {\n    padding: 20px;\n    background-color: #f5f5f5;\n  }\n  .card {\n    background-color: #ffffff;\n    border: none;\n    border-radius: 8px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n  }\n  .card-header {\n    color: #007BFF;\n    padding: 15px 20px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n  }\n  .card-header h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n  }\n  .card-body {\n    padding: 20px;\n  }\n  .empty-state {\n    text-align: center;\n    padding: 40px 20px;\n    color: #6c757d;\n  }\n  .empty-icon {\n    font-size: 48px;\n    margin-bottom: 20px;\n  }\n  .table {\n    width: 100%;\n    border-collapse: separate;\n    border-spacing: 0 10px;\n  }\n  .table th {\n    background-color: #f8f9fa;\n    border: none;\n    padding: 12px;\n    font-weight: 600;\n    color: #495057;\n  }\n  .table td {\n    background-color: #ffffff;\n    border: none;\n    padding: 12px;\n    vertical-align: middle;\n  }\n  .table tbody tr {\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); \n    transition: all 0.3s ease;\n  }\n  .table tbody tr:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  }\n  .btn-approve {\n    background-color: #28a745;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  .btn-approve:hover {\n    background-color: #218838;\n  }\n  .btn-delete {\n    background-color: #e01d0f;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  .btn-delete:hover {\n    background-color: #cc2014;\n  }\n  .btn-space {\n    margin-right: 10px; \n  }\n  /* Styles pour la pagination */\n.pagination {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.pagination button {\n  margin: 0 5px;\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: #007BFF;\n  color: white;\n  cursor: pointer;\n}\n.pagination button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n.pagination span {\n  align-self: center;\n  margin: 0 10px;\n}\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}