{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      formData: {\n        nom_courrier: '',\n        expediteur: '',\n        description: '',\n        dept_destinataire: ''\n      },\n      depts: [],\n      errors: null\n    };\n  },\n  mounted() {\n    axios.get('http://localhost:8081/api/departements').then(response => {\n      this.depts = response.data;\n    }).catch(error => {\n      console.error('Error fetching departments:', error);\n    });\n  },\n  methods: {\n    async submitForm() {\n      if (!this.formData.nom_courrier || !this.formData.expediteur || !this.formData.dept_destinataire) {\n        this.errors = [\"Veuillez remplir les champs nécessaires\"];\n        return;\n      }\n      try {\n        await axios.post('http://localhost:8081/api/insert_courrier', this.formData);\n        this.errors = null;\n        this.formData = {\n          nom_courrier: '',\n          expediteur: '',\n          description: '',\n          dept_destinataire: ''\n        }; // Reset form data\n      } catch (error) {\n        console.error('Error response:', error.response);\n        if (error.response && error.response.data && error.response.data.message) {\n          this.errors = [error.response.data.message];\n        } else if (error.response && error.response.data && error.response.data.errors) {\n          this.errors = error.response.data.errors;\n        } else {\n          this.errors = [\"une erreur a survenue\"];\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","formData","nom_courrier","expediteur","description","dept_destinataire","depts","errors","mounted","get","then","response","catch","error","console","methods","submitForm","post","message"],"sources":["src/pages/InsertCourrier.vue"],"sourcesContent":["<template>\n    <card class=\"card\" title=\"Insertion Courrier\">\n      <div>\n        <form @submit.prevent>\n          <div v-if=\"errors\" class=\"alert alert-danger\">\n            <ul>\n              <li v-for=\"error in errors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-md-12\">\n              <fg-input\n                type=\"text\"\n                label=\"nom\"\n                placeholder=\"Entre le nom du courrier\"\n                class=\"form-input\"\n                v-model=\"formData.nom_courrier\"\n              >\n              </fg-input>\n              <fg-input\n                type=\"text\"\n                label=\"expediteur\"\n                placeholder=\"Entre le nom de l'expediteur\"\n                class=\"form-input\"\n                v-model=\"formData.expediteur\"\n              >\n              </fg-input>\n              <textarea name=\"description\" \n                label=\"description\"\n                placeholder=\"Entre la description\" \n                rows=\"5\"\n                class=\"form-control border-input\"\n                v-model=\"formData.description\"\n              >\n              </textarea>\n              <!-- dropdown dept -->\n            <br>\n              <div class=\"form-group\">\n                <label for=\"dept\">Department</label>\n                <select v-model=\"formData.dept_destinataire\" id=\"dept-courrier\" class=\"form-control\" placeholder=\"Select a department\">\n                  <option v-for=\"dept in depts\" :key=\"dept.id_departement\" :value=\"dept\">\n                    {{ dept.nom_departement }}\n                  </option>\n                </select>\n              </div>\n            </div>\n          </div>\n  \n          <div class=\"text-center\">\n            <p-button style=\"background-color:#007BFF\" round @click.native.prevent=\"submitForm\">\n              Insert\n            </p-button>\n          </div>\n          <div class=\"clearfix\"></div>\n        </form>\n      </div>\n    </card>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        formData: {\n          nom_courrier: '',\n          expediteur: '',\n          description: '',\n          dept_destinataire: '',\n        },\n        depts: [],\n        errors: null,\n      };\n    },\n    mounted() {\n      axios.get('http://localhost:8081/api/departements')\n        .then(response => {\n          this.depts = response.data;\n        })\n        .catch(error => {\n          console.error('Error fetching departments:', error);\n        });\n      },\n    methods: {\n      async submitForm() {\n        if (!this.formData.nom_courrier || !this.formData.expediteur || !this.formData.dept_destinataire) {\n          this.errors = [\"Veuillez remplir les champs nécessaires\"];\n          return;\n        }\n        try {\n          await axios.post('http://localhost:8081/api/insert_courrier', this.formData);\n          this.errors = null;\n          this.formData = { nom_courrier: '',expediteur:'',description:'',dept_destinataire:'' }; // Reset form data\n        } catch (error) {\n          console.error('Error response:', error.response);\n            if (error.response && error.response.data && error.response.data.message) {\n              this.errors = [error.response.data.message];\n            } else if (error.response && error.response.data && error.response.data.errors) {\n              this.errors = error.response.data.errors;\n            } else {\n              this.errors = [\"une erreur a survenue\"];\n            }\n        }\n      },\n    },\n  };\n  </script>\n  \n  <style>\n  .card {\n    border: 1px solid #b1abab;\n    border-radius: 5px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n    max-height: max-content; \n    overflow-y: auto; \n    overflow-x: hidden; \n  }\n  \n  form {\n    max-height: 100%;\n  }\n  .form-input, .form-select, .form-textarea {\n    width: 100%; \n    padding: 12px;\n    border: 1px solid #a3a3a3; \n    border-radius: 5px; \n    margin-bottom: 15px; \n    font-size: 16px; \n    transition: border-color 0.3s; \n  }\n  #dept-courrier{\n    width: 100%; \n    padding: 12px;\n    border: 1px solid #a3a3a3; \n    border-radius: 5px; \n    margin-bottom: 15px; \n    font-size: 12px; \n    transition: border-color 0.3s; \n  }\n  </style>"],"mappings":"AA6DA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,YAAA;QACAC,UAAA;QACAC,WAAA;QACAC,iBAAA;MACA;MACAC,KAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACAT,KAAA,CAAAU,GAAA,2CACAC,IAAA,CAAAC,QAAA;MACA,KAAAL,KAAA,GAAAK,QAAA,CAAAX,IAAA;IACA,GACAY,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAD,KAAA,gCAAAA,KAAA;IACA;EACA;EACAE,OAAA;IACA,MAAAC,WAAA;MACA,UAAAf,QAAA,CAAAC,YAAA,UAAAD,QAAA,CAAAE,UAAA,UAAAF,QAAA,CAAAI,iBAAA;QACA,KAAAE,MAAA;QACA;MACA;MACA;QACA,MAAAR,KAAA,CAAAkB,IAAA,mDAAAhB,QAAA;QACA,KAAAM,MAAA;QACA,KAAAN,QAAA;UAAAC,YAAA;UAAAC,UAAA;UAAAC,WAAA;UAAAC,iBAAA;QAAA;MACA,SAAAQ,KAAA;QACAC,OAAA,CAAAD,KAAA,oBAAAA,KAAA,CAAAF,QAAA;QACA,IAAAE,KAAA,CAAAF,QAAA,IAAAE,KAAA,CAAAF,QAAA,CAAAX,IAAA,IAAAa,KAAA,CAAAF,QAAA,CAAAX,IAAA,CAAAkB,OAAA;UACA,KAAAX,MAAA,IAAAM,KAAA,CAAAF,QAAA,CAAAX,IAAA,CAAAkB,OAAA;QACA,WAAAL,KAAA,CAAAF,QAAA,IAAAE,KAAA,CAAAF,QAAA,CAAAX,IAAA,IAAAa,KAAA,CAAAF,QAAA,CAAAX,IAAA,CAAAO,MAAA;UACA,KAAAA,MAAA,GAAAM,KAAA,CAAAF,QAAA,CAAAX,IAAA,CAAAO,MAAA;QACA;UACA,KAAAA,MAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}