{"ast":null,"code":"import _regeneratorRuntime from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport jwtDecode from 'vue-jwt-decode';\nexport default {\n  computed: {\n    routeName: function routeName() {\n      var name = this.$route.name;\n      return this.capitalizeFirstLetter(name);\n    }\n  },\n  data: function data() {\n    return {\n      activeNotifications: false,\n      username: null\n    };\n  },\n  methods: {\n    getUserFromToken: function getUserFromToken() {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var token, decoded;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"getUserFromToken function called\");\n              token = localStorage.getItem('authToken');\n              console.log(\"Token from localStorage:\", token);\n              if (!token) {\n                _context.next = 13;\n                break;\n              }\n              _context.prev = 4;\n              decoded = jwtDecode.decode(token); // Decode the token\n              console.log(\"Decoded payload:\", decoded);\n              return _context.abrupt(\"return\", decoded.nom_utilisateur);\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](4);\n              console.error(\"Error decoding token:\", _context.t0);\n            case 13:\n              return _context.abrupt(\"return\", null);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[4, 10]]);\n      }))();\n    },\n    created: function created() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this.getUserFromToken();\n            case 2:\n              _this.username = _context2.sent;\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    capitalizeFirstLetter: function capitalizeFirstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    },\n    toggleNotificationDropDown: function toggleNotificationDropDown() {\n      this.activeNotifications = !this.activeNotifications;\n    },\n    closeDropDown: function closeDropDown() {\n      this.activeNotifications = false;\n    },\n    toggleSidebar: function toggleSidebar() {\n      this.$sidebar.displaySidebar(!this.$sidebar.showSidebar);\n    },\n    hideSidebar: function hideSidebar() {\n      this.$sidebar.displaySidebar(false);\n    },\n    logout: function logout() {\n      // this.$store.commit('clearUser'); // Call the clearUser mutation\n      localStorage.clear(\"authToken\");\n      this.$router.push('/'); // Redirect to login page\n    }\n  }\n};","map":{"version":3,"names":["jwtDecode","computed","routeName","name","$route","capitalizeFirstLetter","data","activeNotifications","username","methods","getUserFromToken","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","decoded","wrap","_callee$","_context","prev","next","console","log","localStorage","getItem","decode","abrupt","nom_utilisateur","t0","error","stop","created","_this","_callee2","_callee2$","_context2","sent","string","charAt","toUpperCase","slice","toggleNotificationDropDown","closeDropDown","toggleSidebar","$sidebar","displaySidebar","showSidebar","hideSidebar","logout","clear","$router","push"],"sources":["src/layout/dashboard/TopNavbar.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-expand-lg navbar-light\">\n    <div class=\"container-fluid\">\n      <a class=\"navbar-brand\" href=\"#\">{{ routeName }}</a>\n      <button\n        class=\"navbar-toggler navbar-burger\"\n        type=\"button\"\n        @click=\"toggleSidebar\"\n        :aria-expanded=\"$sidebar.showSidebar\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-bar\"></span>\n        <span class=\"navbar-toggler-bar\"></span>\n        <span class=\"navbar-toggler-bar\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\">\n        <ul class=\"navbar-nav ml-auto\">\n          <li class=\"nav-item\">\n            <a class=\"nav-link\">\n              <p class=\"nav-item\" v-if=\"username\">{{ username }}</p>\n            </a>\n          </li>\n          <drop-down\n            class=\"nav-item\"\n            title=\"5 Notifications\"\n            title-classes=\"nav-link\"\n            icon=\"ti-bell\"\n          >\n          <a class=\"dropdown-item\" @click=\"$router.push('/board/notifications')\">Voir les notifications</a>\n          </drop-down>\n          <li class=\"nav-item\">\n            <p-button type=\"danger\" @click.native.prevent=\"logout\">\n              <a >\n                <small>Log out</small>\n              </a>\n            </p-button>\n        </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n</template>\n<script>\nimport jwtDecode from 'vue-jwt-decode';\n\nexport default {\n  computed: {\n    routeName() {\n      const { name } = this.$route;\n      return this.capitalizeFirstLetter(name);\n    },\n  },\n  data() {\n    return {\n      activeNotifications: false,\n      username : null\n    };\n  },\n  \n  methods: {\n    async getUserFromToken() {\n      console.log(\"getUserFromToken function called\");\n      const token = localStorage.getItem('authToken');\n      console.log(\"Token from localStorage:\", token);\n\n      if (token) {\n        try {\n          const decoded = jwtDecode.decode(token); // Decode the token\n          console.log(\"Decoded payload:\", decoded);\n          return decoded.nom_utilisateur; // Access user information\n        } catch (error) {\n          console.error(\"Error decoding token:\", error);\n        }\n      }\n      return null;\n    },\n    async created() { // Make this an async lifecycle hook\n      this.username = await this.getUserFromToken(); // Use await here\n    },\n    capitalizeFirstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    },\n    toggleNotificationDropDown() {\n      this.activeNotifications = !this.activeNotifications;\n    },\n    closeDropDown() {\n      this.activeNotifications = false;\n    },\n    toggleSidebar() {\n      this.$sidebar.displaySidebar(!this.$sidebar.showSidebar);\n    },\n    hideSidebar() {\n      this.$sidebar.displaySidebar(false);\n    },\n    logout() {\n      // this.$store.commit('clearUser'); // Call the clearUser mutation\n      localStorage.clear(\"authToken\");\n      this.$router.push('/'); // Redirect to login page\n    }\n  },\n};\n</script>\n<style></style>\n"],"mappings":";;;;;AA2CA,OAAAA,SAAA;AAEA;EACAC,QAAA;IACAC,SAAA,WAAAA,UAAA;MACA,IAAAC,IAAA,QAAAC,MAAA,CAAAD,IAAA;MACA,YAAAE,qBAAA,CAAAF,IAAA;IACA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,mBAAA;MACAC,QAAA;IACA;EACA;EAEAC,OAAA;IACAC,gBAAA,WAAAA,iBAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,KAAA,EAAAC,OAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAC,OAAA,CAAAC,GAAA;cACAR,KAAA,GAAAS,YAAA,CAAAC,OAAA;cACAH,OAAA,CAAAC,GAAA,6BAAAR,KAAA;cAAA,KAEAA,KAAA;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAC,IAAA;cAEAJ,OAAA,GAAAhB,SAAA,CAAA0B,MAAA,CAAAX,KAAA;cACAO,OAAA,CAAAC,GAAA,qBAAAP,OAAA;cAAA,OAAAG,QAAA,CAAAQ,MAAA,WACAX,OAAA,CAAAY,eAAA;YAAA;cAAAT,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAU,EAAA,GAAAV,QAAA;cAEAG,OAAA,CAAAQ,KAAA,0BAAAX,QAAA,CAAAU,EAAA;YAAA;cAAA,OAAAV,QAAA,CAAAQ,MAAA,WAGA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA;IACA;IACAkB,OAAA,WAAAA,QAAA;MAAA,IAAAC,KAAA;MAAA,OAAAtB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAqB,SAAA;QAAA,OAAAtB,mBAAA,GAAAK,IAAA,UAAAkB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;YAAA;cAAAe,SAAA,CAAAf,IAAA;cAAA,OACAY,KAAA,CAAAvB,gBAAA;YAAA;cAAAuB,KAAA,CAAAzB,QAAA,GAAA4B,SAAA,CAAAC,IAAA;YAAA;YAAA;cAAA,OAAAD,SAAA,CAAAL,IAAA;UAAA;QAAA,GAAAG,QAAA;MAAA;IACA;IACA7B,qBAAA,WAAAA,sBAAAiC,MAAA;MACA,OAAAA,MAAA,CAAAC,MAAA,IAAAC,WAAA,KAAAF,MAAA,CAAAG,KAAA;IACA;IACAC,0BAAA,WAAAA,2BAAA;MACA,KAAAnC,mBAAA,SAAAA,mBAAA;IACA;IACAoC,aAAA,WAAAA,cAAA;MACA,KAAApC,mBAAA;IACA;IACAqC,aAAA,WAAAA,cAAA;MACA,KAAAC,QAAA,CAAAC,cAAA,OAAAD,QAAA,CAAAE,WAAA;IACA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAH,QAAA,CAAAC,cAAA;IACA;IACAG,MAAA,WAAAA,OAAA;MACA;MACAzB,YAAA,CAAA0B,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}