{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport routes from \"./routes\";\nVue.use(VueRouter);\n\n// Configure router\nvar router = new VueRouter({\n  mode: 'history',\n  // Utilisation du mode historique\n  routes: routes,\n  // Raccourci pour routes: routes\n  linkActiveClass: \"active\"\n});\n\n// Guard de route global\nrouter.beforeEach(function (to, from, next) {\n  var isAuthenticated = localStorage.getItem('authToken');\n  // Vérifiez si la route nécessite une authentification\n  if (to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  }) && !isAuthenticated) {\n    // Rediriger vers la page d'accès refusé si le local storage est vide\n    next({\n      name: 'AccessDenied'\n    });\n  } else {\n    // Autoriser l'accès à la route\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","routes","use","router","mode","linkActiveClass","beforeEach","to","from","next","isAuthenticated","localStorage","getItem","matched","some","record","meta","requiresAuth","name"],"sources":["/home/adrienna/Documents/Stage/Suivi_courrier_front/src/router/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport routes from \"./routes\";\n\nVue.use(VueRouter);\n\n// Configure router\nconst router = new VueRouter({\n  mode: 'history', // Utilisation du mode historique\n  routes, // Raccourci pour routes: routes\n  linkActiveClass: \"active\",\n});\n\n// Guard de route global\nrouter.beforeEach((to, from, next) => {\n  const isAuthenticated = localStorage.getItem('authToken'); \n  // Vérifiez si la route nécessite une authentification\n  if (to.matched.some(record => record.meta.requiresAuth) && !isAuthenticated) {\n    // Rediriger vers la page d'accès refusé si le local storage est vide\n    next({ name: 'AccessDenied' });\n  } else {\n    // Autoriser l'accès à la route\n    next();\n  }\n});\n\nexport default router;"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,MAAM,MAAM,UAAU;AAE7BF,GAAG,CAACG,GAAG,CAACF,SAAS,CAAC;;AAElB;AACA,IAAMG,MAAM,GAAG,IAAIH,SAAS,CAAC;EAC3BI,IAAI,EAAE,SAAS;EAAE;EACjBH,MAAM,EAANA,MAAM;EAAE;EACRI,eAAe,EAAE;AACnB,CAAC,CAAC;;AAEF;AACAF,MAAM,CAACG,UAAU,CAAC,UAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAK;EACpC,IAAMC,eAAe,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACzD;EACA,IAAIL,EAAE,CAACM,OAAO,CAACC,IAAI,CAAC,UAAAC,MAAM;IAAA,OAAIA,MAAM,CAACC,IAAI,CAACC,YAAY;EAAA,EAAC,IAAI,CAACP,eAAe,EAAE;IAC3E;IACAD,IAAI,CAAC;MAAES,IAAI,EAAE;IAAe,CAAC,CAAC;EAChC,CAAC,MAAM;IACL;IACAT,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeN,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}