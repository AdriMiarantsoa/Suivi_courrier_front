{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      courrierlist: '',\n      receptionlist: '',\n      transfertlist: '',\n      user: null,\n      departement: '',\n      departementName: '',\n      errors: null,\n      id_courrier: ''\n    };\n  },\n  async mounted() {\n    await this.getAcheminementCourrier();\n  },\n  methods: {\n    async getAcheminementCourrier() {\n      try {\n        const response = await axios.get('http://localhost:8081/api/utilisateur', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        this.user = response.data;\n        if (!this.user) {\n          console.error(\"User data is missing\");\n          return;\n        }\n        const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${this.user.id_utilisateur}`);\n        this.departement = responsedept.data;\n        console.log(\"Données du view :\", this.departement);\n        const deptresponse = await axios.get(`http://localhost:8081/api/departement/${this.departement}`);\n        this.departementName = deptresponse.data;\n        console.log('nom_departement:', this.departementName);\n\n        //verification\n        if (this.id_courrier !== '') {\n          await axios.get(`http://localhost:8081/api/verification/${this.id_courrier}/${this.departement}`);\n          console.log('id_courrier:', this.id_courrier);\n          const courrierresponse = await axios.get(`http://localhost:8081/api/courrier/${this.id_courrier}/${this.departement}`);\n          this.courrierlist = courrierresponse.data;\n          console.log('courrierList', this.courrierlist);\n          const transfertresponse = await axios.get(`http://localhost:8081/api/courrier_transfert/${this.id_courrier}/${this.departement}`);\n          this.transfertlist = transfertresponse.data;\n          console.log('transfertList', this.transfertlist);\n          const receptionresponse = await axios.get(`http://localhost:8081/api/courrier_reception/${this.id_courrier}`);\n          this.receptionlist = receptionresponse.data;\n          console.log('receptionList', this.receptionlist);\n          this.errors = null;\n        }\n      } catch (error) {\n        console.error('Error response:', error.response);\n        if (error.response) {\n          this.errors = [error.response.data];\n        } else {\n          this.errors = [\"une erreur a survenue\"];\n        }\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","courrierlist","receptionlist","transfertlist","user","departement","departementName","errors","id_courrier","mounted","getAcheminementCourrier","methods","response","get","headers","Authorization","localStorage","getItem","console","error","responsedept","id_utilisateur","log","deptresponse","courrierresponse","transfertresponse","receptionresponse"],"sources":["src/pages/EtatCourrier.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <div class=\"form-inline\">\n            <div class=\"form-group\">\n              <label for=\"id_courrier\">Id Courrier:</label>\n              <input type=\"text\" v-model=\"id_courrier\" id=\"id_courrier\" class=\"form-control\" />\n            </div>\n            <button class=\"btn btn-primary\" @click=\"getAcheminementCourrier\" style=\"margin-top:25px;\">Voir</button>\n          </div>\n\n          <div v-if=\"errors\" class=\"alert alert-danger mt-3\">\n            <ul>\n              <li v-for=\"error in errors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"row mt-4\">\n            <div class=\"col-md-4 mb-3\" v-if=\"courrierlist\">\n              <div class=\"status-card\">\n                <div class=\"status-header\">\n                  <h5>Statut</h5>\n                  <span v-if=\"!transfertlist && !receptionlist\" class=\"badge bg-warning\" style=\"font-size: 20px;\">En attente</span>\n                  <span v-else-if=\"transfertlist && !receptionlist\" class=\"badge bg-info\" style=\"font-size: 20px;\">Transfert</span>\n                  <span v-else-if=\"receptionlist\" class=\"badge bg-success\" style=\"font-size: 20px;\">Reçu</span>\n                </div>\n                <div class=\"status-body\">\n                  <p><strong>Nom:</strong> {{ courrierlist.nom_courrier }}</p>\n                  <p><strong>Date de réception:</strong> {{ courrierlist.date_reception }}</p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"col-md-4 mb-3\" v-if=\"transfertlist\">\n              <div class=\"status-card\">\n                <div class=\"status-header\">\n                  <h5>Date de transfert</h5>\n                </div>\n                <div class=\"status-body\">\n                  <p>{{ transfertlist.date_transfert }}</p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"col-md-4 mb-3\" v-if=\"receptionlist\">\n              <div class=\"status-card\">\n                <div class=\"status-header\">\n                  <h5>Réception</h5>\n                </div>\n                <div class=\"status-body\">\n                  <p><strong>Date de traitement:</strong> {{ receptionlist.date_traitement }}</p>\n                  <p><strong>Traité par:</strong> {{ receptionlist.recu_par.nom_utilisateur }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        courrierlist:'',\n        receptionlist:'',\n        transfertlist:'',\n        user:null,\n        departement:'',\n        departementName: '',\n        errors: null,\n        id_courrier:''\n      };\n    },\n    async mounted() {\n      await this.getAcheminementCourrier();\n    },\n    methods: {\n        async getAcheminementCourrier() {\n            try {\n                const response = await axios.get('http://localhost:8081/api/utilisateur', {\n                    headers: {\n                    Authorization: `Bearer ${localStorage.getItem('authToken')}`, \n                    },\n                });\n                this.user = response.data; \n                if (!this.user) {\n                    console.error(\"User data is missing\");\n                    return;\n                }\n\n                const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${this.user.id_utilisateur}`);\n                this.departement = responsedept.data;\n                console.log(\"Données du view :\",this.departement);\n\n                const deptresponse = await axios.get(`http://localhost:8081/api/departement/${this.departement}`);\n                this.departementName = deptresponse.data;\n                console.log('nom_departement:', this.departementName)\n\n                //verification\n                if(this.id_courrier !==''){\n                  await axios.get(`http://localhost:8081/api/verification/${this.id_courrier}/${this.departement}`);\n                  console.log('id_courrier:', this.id_courrier);\n                \n                const courrierresponse = await axios.get(`http://localhost:8081/api/courrier/${this.id_courrier}/${this.departement}`);\n                this.courrierlist = courrierresponse.data;\n                console.log('courrierList',this.courrierlist);\n\n                const transfertresponse = await axios.get(`http://localhost:8081/api/courrier_transfert/${this.id_courrier}/${this.departement}`);\n                this.transfertlist= transfertresponse.data;\n                console.log('transfertList',this.transfertlist);\n\n                const receptionresponse = await axios.get(`http://localhost:8081/api/courrier_reception/${this.id_courrier}`);\n                this.receptionlist = receptionresponse.data;\n                console.log('receptionList',this.receptionlist);\n                this.errors = null;\n\n                \n                }\n\n            } catch (error) {\n              console.error('Error response:', error.response);\n              if (error.response) {\n                this.errors = [error.response.data];\n              } else {\n                this.errors = [\"une erreur a survenue\"];\n              }\n                console.error(error);\n            }\n        }\n  }\n};\n  </script>\n  \n  <style scoped>\n  .card {\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n  }\n  .card-header {\n    background-color: #343a40;\n    color: white;\n    padding: 15px;\n    border-bottom: 1px solid #343a40;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n  }\n  .card-header h3 {\n    margin: 0;\n    color:rgb(12, 12, 12);\n    font-size: medium;\n  }\n  .card-body {\n    padding: 20px;\n  }\n  .table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n    height: 150px;\n    overflow: auto;\n  }\n  .table th, .table td {\n    border: 1px solid #ddd;\n    padding: 8px;\n    text-align: left;\n  }\n  .table th {\n    background-color: #f2f2f2;\n    font-weight: bold;\n  }\n  .table tbody tr:nth-child(even) {\n    background-color: #f9f9f9;\n  }\n  .table tbody tr:hover {\n    background-color: #f1f1f1;\n  }\n  .btn {\n    padding: 10px 15px;\n    font-size: 14px;\n    border: none;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n    \n  }\n  .btn-group {\n    display: flex;\n    gap: 10px;\n  }\n  .btn-submit {\n    background-color: #007BFF;\n    color: white;\n    margin-top: 25px;\n  }\n  .btn-submit:hover {\n    background-color: #023c7a;\n  }\n  .modal {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: rgba(0, 0, 0, 0.4);\n  }\n  .close {\n    color: #fff;\n    background-color: #dc3545;\n    border-radius: 50%;\n    padding: 5px 10px;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    font-size: 20px;\n    font-weight: bold;\n    cursor: pointer;\n  }\n  .close:hover,\n  .close:focus {\n    background-color: #c82333;\n    text-decoration: none;\n  }\n  .modal-content {\n    background-color: #fff;\n    padding: 20px;\n    border: 1px solid #888;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 5px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    position: relative;\n    overflow-y: auto;\n    max-height: 80vh;\n  }\n  \n  .modal-content h2 {\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 10px;\n  }\n  \n  .modal-content h3 {\n    font-size: 18px;\n    font-weight: bold;\n    margin-bottom: 10px;\n  }\n  \n  .form-group {\n    margin-bottom: 20px;\n    \n  }\n  \n  .form-group label {\n    font-size: 16px;\n    font-weight: bold;\n    margin-bottom: 5px;\n  }\n  \n  .form-group input, .form-group textarea {\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n  }\n  \n  </style>"],"mappings":"AAkEA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,aAAA;MACAC,aAAA;MACAC,IAAA;MACAC,WAAA;MACAC,eAAA;MACAC,MAAA;MACAC,WAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,WAAAC,uBAAA;EACA;EACAC,OAAA;IACA,MAAAD,wBAAA;MACA;QACA,MAAAE,QAAA,SAAAb,KAAA,CAAAc,GAAA;UACAC,OAAA;YACAC,aAAA,YAAAC,YAAA,CAAAC,OAAA;UACA;QACA;QACA,KAAAb,IAAA,GAAAQ,QAAA,CAAAZ,IAAA;QACA,UAAAI,IAAA;UACAc,OAAA,CAAAC,KAAA;UACA;QACA;QAEA,MAAAC,YAAA,SAAArB,KAAA,CAAAc,GAAA,2DAAAT,IAAA,CAAAiB,cAAA;QACA,KAAAhB,WAAA,GAAAe,YAAA,CAAApB,IAAA;QACAkB,OAAA,CAAAI,GAAA,2BAAAjB,WAAA;QAEA,MAAAkB,YAAA,SAAAxB,KAAA,CAAAc,GAAA,+CAAAR,WAAA;QACA,KAAAC,eAAA,GAAAiB,YAAA,CAAAvB,IAAA;QACAkB,OAAA,CAAAI,GAAA,0BAAAhB,eAAA;;QAEA;QACA,SAAAE,WAAA;UACA,MAAAT,KAAA,CAAAc,GAAA,gDAAAL,WAAA,SAAAH,WAAA;UACAa,OAAA,CAAAI,GAAA,sBAAAd,WAAA;UAEA,MAAAgB,gBAAA,SAAAzB,KAAA,CAAAc,GAAA,4CAAAL,WAAA,SAAAH,WAAA;UACA,KAAAJ,YAAA,GAAAuB,gBAAA,CAAAxB,IAAA;UACAkB,OAAA,CAAAI,GAAA,sBAAArB,YAAA;UAEA,MAAAwB,iBAAA,SAAA1B,KAAA,CAAAc,GAAA,sDAAAL,WAAA,SAAAH,WAAA;UACA,KAAAF,aAAA,GAAAsB,iBAAA,CAAAzB,IAAA;UACAkB,OAAA,CAAAI,GAAA,uBAAAnB,aAAA;UAEA,MAAAuB,iBAAA,SAAA3B,KAAA,CAAAc,GAAA,sDAAAL,WAAA;UACA,KAAAN,aAAA,GAAAwB,iBAAA,CAAA1B,IAAA;UACAkB,OAAA,CAAAI,GAAA,uBAAApB,aAAA;UACA,KAAAK,MAAA;QAGA;MAEA,SAAAY,KAAA;QACAD,OAAA,CAAAC,KAAA,oBAAAA,KAAA,CAAAP,QAAA;QACA,IAAAO,KAAA,CAAAP,QAAA;UACA,KAAAL,MAAA,IAAAY,KAAA,CAAAP,QAAA,CAAAZ,IAAA;QACA;UACA,KAAAO,MAAA;QACA;QACAW,OAAA,CAAAC,KAAA,CAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}