{"ast":null,"code":"import _regeneratorRuntime from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/adrienna/Documents/Stage/Suivi_courrier_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      },\n      departementId: '',\n      user: null,\n      courriers: []\n    };\n  },\n  mounted: function mounted() {\n    this.getCourriersAlerte();\n  },\n  methods: {\n    notifyVue: function notifyVue(verticalAlign, horizontalAlign) {\n      var color = Math.floor(Math.random() * 4 + 1);\n      this.$notify({\n        component: NotificationTemplate,\n        icon: \"ti-gift\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color]\n      });\n    },\n    getCourriersAlerte: function getCourriersAlerte() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var userresponse, responsedept, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('http://localhost:8081/api/utilisateur', {\n                headers: {\n                  Authorization: \"Bearer \".concat(localStorage.getItem('authToken'))\n                }\n              });\n            case 3:\n              userresponse = _context.sent;\n              _this.user = userresponse.data;\n              if (_this.user) {\n                _context.next = 8;\n                break;\n              }\n              console.error(\"User data is missing\");\n              return _context.abrupt(\"return\");\n            case 8:\n              _context.next = 10;\n              return axios.get(\"http://localhost:8081/api/departement/utilisateur/\".concat(_this.user.id_utilisateur));\n            case 10:\n              responsedept = _context.sent;\n              _this.departementId = responsedept.data;\n              console.log('id_departement:', _this.departementId);\n              _context.next = 15;\n              return axios.get(\"http://localhost:8081/api/departement/\".concat(_this.departementId, \"/alerte\"));\n            case 15:\n              response = _context.sent;\n              console.log(response.data);\n              _this.courriers = response.data;\n              _context.next = 23;\n              break;\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 20]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","type","notifications","topCenter","departementId","user","courriers","mounted","getCourriersAlerte","methods","notifyVue","verticalAlign","horizontalAlign","color","Math","floor","random","$notify","component","NotificationTemplate","icon","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userresponse","responsedept","response","wrap","_callee$","_context","prev","next","get","headers","Authorization","concat","localStorage","getItem","sent","console","error","abrupt","id_utilisateur","log","t0","stop"],"sources":["src/pages/Notifications.vue"],"sourcesContent":["<template>\n  <card title=\"Notifications\" sub-title=\"documents qui ont depasses les 24h sont etre recus\">\n    <div>\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n\n            <table class=\"table\"  v-for=\"courrier in courriers\" :key=\"courrier.id_courrier\">\n              <thead>\n                <tr>\n                  <th>Date of reception</th>\n                  <th>Id</th>\n                  <th>Name</th>\n                  <th>Expeditor</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <div class=\"alert alert-info alert-with-icon\" data-notify=\"container\">\n                    <button type=\"button\" aria-hidden=\"true\" class=\"close\">Ã—</button>\n                    <span data-notify=\"icon\" class=\"ti-bell\"></span>\n                    <td>{{ courrier.date_reception }}</td>\n                    <td>{{ courrier.id_courrier }}</td>\n                    <td>{{ courrier.nom_courrier }}</td>\n                    <td>{{ courrier.expediteur }}</td>\n                </div>\n                </tr>\n              </tbody>\n            </table>\n\n        </div>\n      </div>\n\n      <br />\n      <br />\n\n    </div>\n  </card>\n</template>\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false,\n      },\n      departementId: '',\n      user:null,\n      courriers: []\n \n    };\n  },\n  mounted() {\n    this.getCourriersAlerte();\n  },\n  methods: {\n    notifyVue(verticalAlign, horizontalAlign) {\n      const color = Math.floor(Math.random() * 4 + 1);\n      this.$notify({\n        component: NotificationTemplate,\n        icon: \"ti-gift\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n      });\n    },\n    async getCourriersAlerte() {\n            try {\n              const userresponse = await axios.get('http://localhost:8081/api/utilisateur', {\n                headers: {\n                  Authorization: `Bearer ${localStorage.getItem('authToken')}`, \n                },\n              });\n              this.user = userresponse.data; \n              if (!this.user) {\n                console.error(\"User data is missing\");\n                return;\n              }\n              const responsedept = await axios.get(`http://localhost:8081/api/departement/utilisateur/${this.user.id_utilisateur}`);\n                this.departementId = responsedept.data;\n                console.log('id_departement:', this.departementId);\n\n              const response = await axios.get(`http://localhost:8081/api/departement/${this.departementId}/alerte`);\n              console.log(response.data);\n              this.courriers = response.data;\n            \n            } catch (error) {\n            console.error(error);\n            }\n        }\n  },\n};\n</script>\n<style></style>\n"],"mappings":";;AAuCA,OAAAA,KAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,aAAA;QACAC,SAAA;MACA;MACAC,aAAA;MACAC,IAAA;MACAC,SAAA;IAEA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,kBAAA;EACA;EACAC,OAAA;IACAC,SAAA,WAAAA,UAAAC,aAAA,EAAAC,eAAA;MACA,IAAAC,KAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA;MACA,KAAAC,OAAA;QACAC,SAAA,EAAAC,oBAAA;QACAC,IAAA;QACAR,eAAA,EAAAA,eAAA;QACAD,aAAA,EAAAA,aAAA;QACAV,IAAA,OAAAA,IAAA,CAAAY,KAAA;MACA;IACA;IACAL,kBAAA,WAAAA,mBAAA;MAAA,IAAAa,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,YAAA,EAAAC,YAAA,EAAAC,QAAA;QAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEAlC,KAAA,CAAAmC,GAAA;gBACAC,OAAA;kBACAC,aAAA,YAAAC,MAAA,CAAAC,YAAA,CAAAC,OAAA;gBACA;cACA;YAAA;cAJAb,YAAA,GAAAK,QAAA,CAAAS,IAAA;cAKAnB,KAAA,CAAAhB,IAAA,GAAAqB,YAAA,CAAA1B,IAAA;cAAA,IACAqB,KAAA,CAAAhB,IAAA;gBAAA0B,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACAQ,OAAA,CAAAC,KAAA;cAAA,OAAAX,QAAA,CAAAY,MAAA;YAAA;cAAAZ,QAAA,CAAAE,IAAA;cAAA,OAGAlC,KAAA,CAAAmC,GAAA,sDAAAG,MAAA,CAAAhB,KAAA,CAAAhB,IAAA,CAAAuC,cAAA;YAAA;cAAAjB,YAAA,GAAAI,QAAA,CAAAS,IAAA;cACAnB,KAAA,CAAAjB,aAAA,GAAAuB,YAAA,CAAA3B,IAAA;cACAyC,OAAA,CAAAI,GAAA,oBAAAxB,KAAA,CAAAjB,aAAA;cAAA2B,QAAA,CAAAE,IAAA;cAAA,OAEAlC,KAAA,CAAAmC,GAAA,0CAAAG,MAAA,CAAAhB,KAAA,CAAAjB,aAAA;YAAA;cAAAwB,QAAA,GAAAG,QAAA,CAAAS,IAAA;cACAC,OAAA,CAAAI,GAAA,CAAAjB,QAAA,CAAA5B,IAAA;cACAqB,KAAA,CAAAf,SAAA,GAAAsB,QAAA,CAAA5B,IAAA;cAAA+B,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;cAGAU,OAAA,CAAAC,KAAA,CAAAX,QAAA,CAAAe,EAAA;YAAA;YAAA;cAAA,OAAAf,QAAA,CAAAgB,IAAA;UAAA;QAAA,GAAAtB,OAAA;MAAA;IAEA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}